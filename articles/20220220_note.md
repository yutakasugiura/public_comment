エンジニアとして最近思うのが「近い将来、コードが読めないと経営判断できない時代になる」ということです。

もちろん、ソフトウェアをつくらない会社では、コードを読む必要はありません。

ですが、ソフトウェアやデジタルをビジネスの柱にしたい会社にとっては「大事な経営判断は、全てエンジニアリングへの理解が土台になってくるだろうな」と、薄々感じています。

そして、その土台とは「ベンダーをコントロールする調整力」でもなく、「世の中のトレンドに詳しい」ことでもなく、「さまざまな技術資格を持っている」ことでもありません。よく言われるような「プログラミングができる」ことも違います。

あくまでも、いま、この瞬間に動いているアプリケーションのコードを読み、そのアーキテクチャを理解できること。ある種、非常にローテクなことが大切になるのではないか？

エンジニアとして日々コードを読み書きするなかで、この思いが強まりつつあります。そこで、この仮説を言語化したくなりました。

ソフトウェアは常にカイゼンしよう

エンジニアにとって、ソフトウェアの開発は「ものづくり」です。

コードは単に動けば良いわけではありません。誰にとっても読みやすいこと、すなわち「リーダブル」であることが大切で、コードから属人性を無くすことが基本です。

書いた本人だけが理解できる「複雑なコード」は、好ましくありません。よくわからない関数や引数の命名は、最悪と言っていいでしょう。コードを書く時には「オレはこんなコードが書けるんだぞ！」という自慢ではなく、誰にとっても理解しやすいこと、すなわちホスピタリティーが大事なのです。

<?php

class SampleReadableCode {

　　　　// 読みにくいコードの例
　　　　// 読んだ人の気持ち「データを作る？何を？何が返ってくるの？触りたくない・・・」
　　　　public function createData($userId, $data)
　　　　{
   　　//略
　　　　}

　　　　// 読みやすいコードの例
　　　　// 読んだ人の気持ち「記事データを作るのか。オブジェクト型を見れば制約条件が分かりそう」
　　　　public function createArticle(UserIdentifier $userId, ArticleEntity $article): bool
　　　{
   //略
　　　}
}

そのほかにも、関数の分割や、依存関係の見直しなどを行うことで、コードの見通しが良くなるように、気を遣いながら、実装を進めていきます。

こうして、エンジニアによって実装されたコードは、GitHubというツールを使って、ほかのエンジニアからレビューを受けます。レビューでは、コードの差分を見つつ、気づいたことをコメントしていき、間違えがあれば修正をします。具体的には下記のような画面です。（↓趣味で書いたコードのレビューページ。実はダメなコードで、やらかしてます）

レビューで複数のエンジニアから「Approve」というGOサインをもらったら、コードを検証用のサーバーにデプロイして、動作を確認します。問題がなければ、いよいよ本番環境のサーバーにもコードをデプロイします。エンジニアからすると、この本番へのリリースは「手に汗を握る瞬間」です。時にはお祈りをします。それで、無事に本番サーバーにデプロイされると、この瞬間からコードは「お客さんにサービスを提供する」という価値を生み出します。

このように、さまざまなフローを経てコードに価値が宿るわけですが、ソフトウェアでいちばん大切なことは、コードを絶え間なくアップデートすることです。すなわち、頻繁に、本番リリースができるかどうかです。

これだけインターネットが世の中に普及すると、ニーズも絶え間なく変化します。前もって「ここにニーズがあるぞ！」と当てるのは、なかなか難しいでしょう。だからこそ、ニーズを探るためにも、スピーディーに新しい機能を追加しなければなりません。

つまり、カイゼンによって、ソフトウェアの価値が磨かれます。この成果が、バージョンアップやリリースであり、ソフトウェアの生命線です。リリースが頻繁なソフトウェアは、それだけ、顧客にサービスを提供するための試行錯誤に、時間とお金を投資しています。

そして、小さく見えるリリースであっても、大きな価値を創出したり、相応のリスクをとっている場合があります。

わかりやすいGoodな具体例として、noteのリリースを紐解いてみます。（※筆者はnoteの運営会社とは無関係です）

まず、noteの大事なリリースの代名詞といえば「ドメイン移行」です。2019年にドメインを「note.mu」から「note.com」へ移行したリリースは、見た目としてはわかりやすい変更です。URLに表示される文字列が変更されるので、イメージがしやすいでしょう。

しかし、この移行作業が「決死」だったという事実は、エンジニア以外の方には理解されにくいでしょう。特に、プロジェクトの完遂まで2年かかったという時間軸は、インターネットのことを「ちょっとわかる人」なら、なおさら「え？ドメイン移行だけで2年？」と思われるはずです。相応にリスクをとったプロジェクトといえます。

次に、2021年にnoteからリリースされた「画像配信の最適化」は、一見するとニッチですが、とても重要なリリースの典型といえるでしょう。

外部のエンジニアとして、筆者がこのリリースの狙いを推察すると「多少のリスクを背負いつつも、コスト競争力を磨きつつ、noteのコアである検索流入を安定させるための打ち手」に見えます。

推察の過程は、マニアックなエンジニアリングの話になってしまうので、詳細が知りたい方は、GitHubにイシューを立てて書いたので、そちらをご覧ください。↓

このように、ソフトウェアへの解像度が高ければ、いろいろなリリースの狙いや、それに伴うリスクを察することができます。

そして、表からは見えにくく、過小評価されやすいリリースこそ、当事者にとっては競争優位の源泉です。その理由は、ユーザーが増えていき、システムが大規模になると、小さなリリースが大きな効果を生むからです。

こうしたカイゼンを「どのような順序で、どれほどの工数をかけて、どのくらいのリスク覚悟してやるのか？」を決めることが、ソフトウェア企業における大事な経営判断なのです。

問題は、コードが読めない経営層は、このジャッジメントができるのか？ということです。筆者の個人的な見解を述べると、少々、難しいような気がしてなりません。

伝統的な大企業が繰り出すアンチパターン

では、カイゼンをしないソフトウェアは、どうなるのでしょうか？

ひょっとすると、日本の大企業が進めている「DX」というよくわからない行動は、カイゼンを放棄したソフトウェアの典型になるかもしれません。（将来、そうならないことを願って書いています。。。すごく難しいでしょうが。。。）

こうした大企業でよく目にするのが、業務の一部を自動化したり、ノーコードツールを導入することです。一見すると良い取り組みに見えますが、本当にそうでしょうか？実は、こうしたボトムアップ型の「DX」は、エンジニアの視点からするとアンチパターンを生みやすく、警戒すべき対象です。

その理由は、アーキテクチャという全体像があらかじめ無いと、部分最適の「ツール」が社内のいたるところに散乱し、最後は「これって、どのツールと関係しているのだっけ？」といった状態に陥るからです。最初の数年は良いですが、その後が地獄です。

アーキテクチャなきソフトウェアは、無政府状態と同じです。コードが無法地帯になると、百戦錬磨のエンジニアであればあるほど、近づくのを躊躇します。

ここで、ソフトウェア業界の歴史から、一つの教訓を紹介します。

十数年前、すなわち2000年代に、ソフトウェア業界では「オレオレ・フレームワーク」の流行がありました。一度フレームワークを作れば、手軽に様々なwebアプリケーションを作れるので、短期的には生産性を大きく高めました。便利なので「フレームワークの時代だ！」となり、様々な独自フレームワークが生まれ、カンブリア紀の大爆発がおきます。

一方で、GitHubを起点としたOSSの台頭によって、独自フレームワークの趨勢が変化します。2010年代を通じてRuby on Rails やLaravelといった汎用的なフレームワークの開発が、GitHubを通じて盛んになり「そもそも実装するコストが大変だよね」「それよりもみんなで優れたフレームワークを作ったほうが効率的だし、脆弱性に対するアップデートにも強いよね」となります。こうして、汎用フレームワークには改善改良が重ねられ、webアプリケーションのフレームワークの市場では、特定のフレームワークが大半のシェアを握るようになりました。この血k、独自フレームワークは、ひっそりと、その役目を終えたのです。

ちなみに、TwitterやShopifyといったグローバルなプロダクトも、創業期にRuby on Railsのポテンシャルをフル活用することによって、爆速成長を遂げました。独自フレームワークからの脱出が、次世代のベンチャー企業を育てた側面もあります。Shopifyでは、今でもRailsが現役バリバリで、創業者はRuby on Railsのコミッターです。経営層もOSSにコミットしましょう！

このように、OSSが興隆して、巨大企業を生み出す一方で、独自フレームワーク構築されたシステムは、どこかのタイミングでフレームワークのリプレイスをしない限り、そのまま動き続けます。こうなると、OSSが常識の時代に中途入社したエンジニアにとっては「つらみ」になります。独自フレームワークの概要を理解するキャッチアップのコストが必要となり、エンジニア組織の生産性が低下するからです。加えて、独自フレームワークはドキュメント資料に乏しいことも多く、結果として、多くの後任エンジニアたちが涙を呑んでしまいました。

参考→Twitter検索「オレオレフレームワーク min_faves:200」

もちろん、独自フレームワークを否定しているわけではなく、その試行錯誤の過程や、実装の難しさには敬意を表さずにはいられません。認証基盤の実装などは、大変さの極みです。しかし、問題は、そのフレームワークが「アップデート」や「リプレース」によって、エンジニアの生産性を維持すべきだったものの、この投資が行われないことにありました。ただし、これは無理のない話で「機能は変わらないけど、一時的にコストをかけて、エンジニアの生産性を高めること」への投資を腹落ちできるのは、エンジニアリングで苦労した経験がないと、なかなか難しいでしょう。

つまり、将来のアップデートを想定したアーキテクチャを先に考えないと、数年後には「オレオレ・ノーコード」や「オレオレ・自動化ツール」が散乱し、システムにおける不確実性が増大します。仮に、独自ツールが氾濫した場合は、将来どこかのタイミングでコストをかけてリプレイスする必要があり、それを覚悟できますか？という話になってきます。

ソフトウェアに必要なのは足し算ではなく、足し算に備えた整理整頓です。この本質を腹落ちしている経営層が、どのくらいいるのか？ということが大事になってくるでしょう。やはり、コードが読めないと「なかなか理解が追いつかないだろうな」というのが、筆者の思うところです。

少し余談です。

ノーコードツールが普及すると「プログラミングは不要だ！」と考える方が稀にいらっしゃいますが、半分真実で、半分大嘘です。その理由は単純で、ノーコードツールは、ソフトウェアであり、コードでつくられているからです。話題のNotionも、裏はNode.js（TypeScript）で実装されています。さらにNotionのAPIを叩くなら、RESTful APIの知識が必須になります。ノーコードの本質は「コードがない」のではなく「APIの可用範囲の拡大」です。APIをつくるバックエンドエンジニアの需要は、ますます増えています。

余談おわり。

大事なのはソフトウェアを創る順序

日本の古き良き大企業は、「アーキテクチャ」や「カイゼン」を無視している以外にも、より深刻な問題を抱えています。それは、ソフトウェアを創る順序を間違えているという点です。よく、下記のような発表をよく目にしますが、これらのほとんどは、その順序を間違えています。

「DXの部署を設置」「自社アプリの開発」「SIerではなく内製化」

大切なことは、まず最初に、世の中で満たされていないニーズを洞察し、次にソフトウェアで解決する道筋を描き、最後に人を雇って部署を作るという、打ち手の手順を守ることです。

そして、最初の出発点である「ビジネスの全体像」を描けるのは、エンジニアでもなければ、デジタル部門の責任者でもありません。最終的な意思決定者である社長が、ビジネスの全体像を構想すべきでしょう。

ですが、ソフトウェアに疎い社長や経営層の場合、ソフトウェアを中心に据えたビジネスの構想を描けないため、現場にすべてを丸投げして「部分最適」に走ってしまうのです。昨今のITコンサルタントという職業が潤っているのは、実は、非常に悲しいこと（もう手遅れ）なのかもしれません。

業績貢献は10年後。ずっと投資できますか？

加えて、考慮から漏れやすいのが、業績貢献に至る「時間軸」の視点です。

「エンジニアリングの業績貢献は5〜10年後」

このことを許容できるかどうかです。

この合意が、経営層のなかで形成されていないと、競争優位の道筋は描けません。場合によっては、大株主（投資家）の協力も必要です。なぜかと言えば、絶え間ないカイゼンによって、顧客に価値を提供するソフトウェアは、とてつもなく、息が長い事業だからです。

インターネットが普及した現代において、ソフトウェアのキャッシュポイントは定額課金や従量課金であることが多く、必然的に損益分岐点が先延ばしされます。

特に業務システム系のサービスの場合、1年や3年で成果が出る甘い世界ではなく、5年〜10年と開発への投資を続けて、ようやくユーザーに寄り添った価値提供が可能になり、ROIがプラスになる世界です。

つまり、本質的には「勝負する投資の時間軸の長さ」が、ビジネスの明暗を分けます。（例外として、ゲーム業界だけは「当たった・外れた」の世界なので、異なるエコノミクスで動いています）

そして、ソフトウェアをアップデートする難易度は、ユーザー数が増え、機能を充実させるにつれて、高まっていきます。

まず、サービスが成長してユーザーの数が増えると、エンジニアには負荷分散の技術が求められます。大量のアクセスがあっても遅延なく処理することを考えて、コードを書かなければならないからです。単に動くコードとは、別次元の「パフォーマンスチューニング」という専門的な技術が必須になります。

例えば、データベースに影響があるようなリリースは、ハードシングスの典型です。データベースのパフォーマンスは、さまざまな要因に左右されるため、エンジニアは色々なことを気にしつつ、コードを書きます。下に書いたことは、考慮すべきことのごく一部です。

「永続化されたレコード数」「JOIN結合数」「SQLクエリ発行数」「INDEXの最適化」「メモリ上限値」「ロック」「更新系関連テーブルの分割」「リードレプリカ」

次に、サービスが成長して機能が増えると、ソフトウェアは複雑化します。

エンジニアは、この複雑性を受け入れるしかありません。なぜかといえば、どれだけアーキテクチャを美しく保ったとしても、コードの量が増えることは避けられないからです。共通処理を切り出しても、今度は依存の問題が出てきます。過度な依存は、ソフトウェアを複雑にしてしまい、見通しを悪化させます。

エンジニアにできることは、責務を正しく分割した設計をおこない、誰にでも読みやすいコードを実装し、テストコードを書いて品質を担保することです。このため、稼働中のソフトウェアに対して、1つの機能を新しく追加するコストは、システムの複雑さに比例して増大します。

つまり、順調にプロダクトが育っていった場合、1つの機能を追加するときにかかる開発コストは、サービスのローンチから経過した時間に比例して増えていくのです。

成長しているソフトウェアの開発は「渋谷駅の改修工事」に似ています。毎日、大量の利用者がいるなかで、JR・メトロ・東急・京王といった複数の鉄道路線を運行したまま、高層ビルの建設を進める再開発は、大規模なソフトウェアの開発そのものといえます。

そして、渋谷駅の改修工事が数十年続くように、ソフトウェアにも長期にわたる投資が必要なのです。

しかし、コードが読めない経営層にとって、ソフトウェアは「見えない存在」であり、開発の大変さは理解しづらいでしょう。もし、経営層が「10年も待てない」と考えて、すぐに成果の出るソフトウェアの開発を急いだ場合、どうなるのでしょうか？

おそらく、その結果は厳しいものになるでしょう。

すぐに実装でき、すぐに効果が出るソフトウェアを生み出せたとしても、その条件は競合他社にとっても同じです。競争優位は生まれません。「利益が出ること」と「利益が持続すること」は別次元の問題です。

競争優位のソフトウェアを創りたいのであれば、経営層が長期にわたる開発投資を覚悟して、知恵を絞らなくてはなりません。ですが、ここまで肝の据わった決断ができる経営層は稀です。ほとんどの場合、成果に焦ってしまい、禁断の言葉を口にして「悲劇のトリガー」を引いてしまいます。

そして、経験豊富なエンジニアは、下記のような「上層部からの方針（悲劇のトリガー）」に対して、非常にセンシティブです。

「リリース日（納期）は絶対厳守」「5人追加したから、間に合うよね？」「技術的には可能でしょ？見積もりは？」「リリースの遅延は論外」「なんでテストコードを書くの？」 「リファクタリングなんて無駄」「こんな高額な監視ツール、ダメ」「誰がバグを出したんだ」

エンジニアと投資家は「経営層」を冷徹にみる

誤解を恐れずに言えば、コードを読み書きするエンジニアにとって、ソフトウェアに疎い経営層ほど「厄介」なものはありません。

日本のエンジニア界隈におけるスラングで「メテオフォール型開発」という用語があり、時折、TwitterなどのSNSで話題になります。これは、絶対的な意思決定者（誰とは言わない）が、エンジニアが開発する環境をめちゃくちゃに破壊することを揶揄した用語です。

（↓eiki_okuma氏が提唱）

Twitterでの検索例「メテオフォール&min_faves:200」

では、現実問題として、経営層がエンジニアに「宣戦布告」した場合、その会社の開発組織はどうなるのでしょうか？

結論から言えば、その会社から「できるエンジニア」は一斉に消えます。それが世間巷における有名大企業であっても、エンジニアに破格の高給を提示していたとしても、エンジニアは容赦なく転職していきます。

なぜかといえば「できるエンジニア」は引く手あまたであり、コードに対して理解のない会社にコミットする理由はないからです。また、給与額をアップしても、海外のトップ企業の「本気度」からすれば、微々たるものであり、引き留めの交渉材料にはなりません。

そして「できるエンジニア」が消えたソフトウェアからは、アーキテクチャによる統治が失われ、コードは無法地帯と化します。こうなると、ソフトウェアをアップデートするコストが激増し、生産性が低下していきます。こうしてソフトウェアは炎上し、その会社は二度と「できるエンジニア」を採用することはできません。噂は、すぐに広まるものです。

つまり、ソフトウェアを中心とする事業において、競争優位を確立するためには、エンジニアを雇い続ける必要があり、その鍵を握るのが「コードが読める経営層」なのです。実際にコードを書く必要はないですが、エンジニアの気持ちを汲み取れること、すなわち「（いざとなったら）コードが読める」ことが必須です。

ちなみに、2010年以降に設立された日本のソフトウェア企業においては、良い兆候があります。

それは、特に起業家が、会社の創業期にコードを書いて、プロダクトを創っていたことも多いからです。創業者らしきGitHubのアカウントも、チラホラ目にします。その理由は、国内のベンチャーキャピタルや、一部の海外の機関投資家が、ここ10年にわたってテクノロジーを重視してきたためです。

そもそも、コードに関する理解が創業者にない場合、多くの投資家は出資を躊躇します。テクノロジーを駆使するビジョンを描いているのに、その当事者がコードを読み書きできないのであれば「ニセモノ」かもしれないからです。

つまり、2010年以降に設立されたソフトウェア企業は、エンジニアという従業員に加えて、大株主である投資家からも、経営層は冷徹に吟味されています。ガバナンスが機能しているわけです。これは、ソフトウェア業界特有の、新しいガバナンスの効かせ方と言えるでしょう。ここでのガバナンスの意味は「経営者統治」であり、経営層の生殺与奪の権を「投資家」と「エンジニア」も握っているという意味です。本来、経営層（執行）・株主（資本市場）・従業員（労働市場）は、それぞれの役割のもとで、対等にあるべきで、これが普通です。

新しいソフトウェア企業は、新しいガバナンスによって、洗練されつつあります。古き良き日本の大企業は、危機感を持つべきなのかもしれません。（もう、ほぼ、手遅れですが・・・）

「コードが読める世代」と「読めない世代」の利害は一致する

これからの時代において、コードが読める人、特に10代や20代の方々にとっては非常に良い時代です。どこに行っても重宝されるでしょうし、比較的、自由な働き方が許される（というよりも、需給の関係で自由な働き方を許容しないと、そもそもエンジニアを採用できない）ので、コードを読み書きするセンスがある人には、おすすめです。

また、将来有望なソフトウェア企業には、海外の機関投資家などを通じて「潤沢かつ長期の開発資金」が供給されている時代です。このため、かつては3Kと言われたコードを読み書きする「エンジニア」という職業のイメージも、今後は大きく変わっていくでしょう（※ただし資金調達に成功した企業に限る）。資金循環の趨勢が変わりつつあることが、エンジニアの待遇改善に大きく関わっています。

対照的に、コードが読めないのに「DX」というバズワードを連発する経営層にとっては暗黒を通り越して、氷河期の時代です。投資家はもとより「できるエンジニア」からも相手にされません。

コードが読み書きできない「名ばかりエンジニア」や「なんちゃってITコンサルタント」も、今後はそのメッキが剥がれていくでしょう。ソフトウェアの知見がない40代の大企業管理職にとっても、生き辛い時代になりつつあります。

しかし、世の中の資金循環という視点では、これが悲観すべき「断絶」をもたらすわけではありません。

以下、筆者の仮説です。

仮に、今の若い世代がソフトウェア企業において、しっかりとコードを読んだ上で、正しい意思決定を下し、本業で営業キャッシュフローを確保し、その結果として機関投資家（年金基金や大学基金など）が保有する株式の価値を、10年のスパンで高めることに成功したとします。

すると、これらの有価証券の利益は、配当・売却益・含み益を通じて「コードの読めない世代」に還元されて、社会全体が豊かになります。たとえば、大学基金が運用に成功すれば、学費を下げたり、奨学金の原資になるでしょうし、年金基金が高いパフォーマンスを出せば、老後資金が増えます。

すなわち、異なる世代において、「投資サイド（応援団）」と「執行サイド（実行部隊）」に分かれて、それぞれの役割をまっとうした場合においては、世代を超えた利害は一致するわけです。

キーファクターは、機関投資家からのソフトウェア産業に対する長期資金の流入ですが、景気変動による流入額の変動はありつつも、今後、少しずつ時間をかけて定着していくでしょう。当然、機関投資家サイドから、企業に対して「開発投資をしなさい」という要請も強まるため、コードを読める世代は、しっかりと機関投資家の期待に報いる必要があります。

つまり、コードが読める世代と、コードが読めない世代は、上下の関係ではなく、それぞれ手を取り合うべき補完の関係にあるのです。むしろ、コードを読める世代の方が、株主を通じたプレッシャーに晒される時代でもあります。

時代は大きく変わりました。

いつの日か「メテオフォール型開発」が忘却されることを、心の底から、切に願っています。

今月はエンジニアとしてのエッセイでした。おしまい。

（来月は「エンジニアのための有価証券報告書入門」でも書こうかなぁ）