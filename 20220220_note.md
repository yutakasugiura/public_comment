# コードを読める人が経営判断すべき理由

ソフトウェアエンジニアという職業が、脚光を浴びて久しいですが、いよいよ、コードが読めなければ「まともな経営判断ができない」時代になりつつあります。

「いや、そんなことはないだろう」と言われればそれまでなのですが、確かにソフトウェアを必要としない事業領域ではその通りです。

ですが、ソフトウェアの業界では、経営層もコードが読めないと「話にならない」ということが、現実になりつつある気がします。

そこで今回は、筆者の本職であるエンジニアの視点から、この事実を考察します。
  
## ソフトウェアはものづくり。継続的な「カイゼン」に価値が宿る

ソフトウェアの開発は「ものづくり」です。

エンジニアは、まずシステムの全体像である「アーキテクチャ」を構想し、次に手を動かして地道にコーディングすることで、ソフトウェアをつくります。使用する技術は新しいことが多いですが、その実現方法は「構想」と「手を動かすこと」なので案外ローテクです。特にアーキテクチャの構想には正解がないため、経験豊富なエンジニアが思索を重ねて、その答えを見つけるしかありません。

そして、つくられたコードが本番環境にリリースされることで、ソフトウェアは「顧客にサービスを提供する」という価値を生み出します。

<b>この時に、いちばん大切なことは「価値の持続性」です。つまり、コードを絶え間なくアップデートすることが何よりも重要になります。</b>

なぜかといえば、これだけインターネットが普及した世界においては変化が激しく、ニーズも絶え間なく変化するからです。事前に「ここにニーズがあるぞ！」と当てるのは至難の業です。

このため、顧客からのフィードバックを得て、素早くシステムを改修することが重要になります。いわゆる「カイゼン」を行うことが、ソフトウェアの付加価値を高める唯一の方法であり、場合によっては、サービスの内容を大きく変えることもあるでしょう。

今風の言葉を使えば「バージョンアップ」や「リリース」が、ソフトウェアの生命線です。

ところが、リリースは、エンジニアやプロダクト責任者以外の方々には気づかれにくく、過小評価されやすい現状があります。実は、見逃してしまいそうな細かいバージョンアップでも、重要なメッセージを発していることがあります。

具体的にイメージするために、noteのリリースを例に考えてみます。（※筆者はnoteの運営会社とは無関係です）

2019年にドメインを「note.mu」から「note.com」へ移行したリリースは、見た目としてはわかりやすい変更です。

しかし、この移行作業が「決死」だったという事実は、エンジニア以外の方には理解されにくいでしょう。特に、完遂まで2年かかったという時間軸は、インターネットのことをちょっとわかる人でも「え？ドメイン移行だけで2年？」と思われるはずです。

https://note.jp/n/naefe7919ceeb

また、noteが2021年にリリースした「画像配信の最適化」は、一見するとニッチですが、非常に重要なリリースの典型と言えます。

https://note.jp/n/n516042eef752

noteからは、このリリースに関するブログが公開されており、これをヒントに、外部の視点から「狙い」を推察すると次のようになります。

<i>「多少のリスクを背負いつつも、コスト競争力を磨きつつ、noteのコアである検索流入を安定させるための打ち手」</i>
（考察過程は、あまりにもマニアックなエンジニアリングの話になるので、気になる方は最下部の注釈を読んでください）

この画像配信の最適化のリリースも、検討開始から完了までに1年以上かかったそうで、大きなプロジェクトだったことが窺えます。

このように、普段からコードを読み、システムに対する洞察力があれば、リリースの狙いと、それに伴うリスクを察することは、それほど難しくありません。

そして、表からは見えにくく、過小評価されやすいからこそ、当事者にとっては競争優位の源泉になります。微妙な違いであればあるほど、ユーザーが増加してシステムが大規模になるにつれて、大きな差になってくるからです。小さな改修でも、スケールが効いてくるのがソフトウェア開発の醍醐味です。

<b>こうしたカイゼンを「どのような順序で」「どれほどの工数をかけて」「どの程度のリスク覚悟して」実施するのかを判断することが、ソフトウェアにおける経営の重要事項なのです。</b>

## 古き良き大企業が繰り出すアンチパターン
  
問題が山積しているのは「DX」を標榜する、古き良き日本の大企業です。ほとんどの場合、ソフトウェアの「ものづくり」や「カイゼン」という特性を考慮しないで、筋違いの方向に全力疾走しています。

よくあるのが、業務の一部を自動化したり、ノーコードツールを導入する動きです。一見すると「良い取り組み」に思えるのですが、エンジニアの視点からすると「アンチパターン」そのものです。

なぜかと言えば、ちゃんとしたアーキテクチャという全体像を最初に考えないと、部分最適の「ツール」が社内の至る所に散乱し、最後は「これってどこと関係しているのだっけ？」といった状態に陥るからです。アーキテクチャがないソフトウェアは、法律が無い国家と同じです。コードが無法地帯になると、やがて百戦錬磨のエンジニアでさえ、近づくのを躊躇するようになります。

歴史を振り返れば、十数年前、ソフトウェア業界では「オレオレフレームワーク」が流行したことがあります。しかし、属人化した仕組みは、長期的には組織の生産性を低下させ、その作成者がなんらかの理由で離職したときに「得体の知れないやばいコードが動いている」存在になってしまいました。

つまり、将来のメンテナンスを踏まえたアーキテクチャを先に描かないないと、数年後には「オレオレノーコード」「オレオレ自動化ツール」が無造作に散乱し、システムにおける不確実性だけが増大してしまうのです。「DX」と言いつつも「カイゼン」とは真逆の方向に走っているのが、古き良き大企業における実情かと思います。

<b>ソフトウェアに必要なのは足し算ではなく、足し算に備えた整理整頓です。</b>

他にも、古き良き大企業において、下記のような発表をよく目にしますが、お世辞にも「筋が良い」とは言えません。

<ul>
<li>DXの部署を設置</li>
<li>自社アプリの開発</li>
<li>SIerではなく内製化（エンジニアを自社雇用）</li>
<li>海外（東南アジア）に100名規模の開発拠点を新設</li>
</ul>

なぜかといえば、これらの打ち手は「部分最適」であり「統合された姿」ではないからです。

そうではなく、ソフトウェアで実現したいビジネス（＝世の中に満たされていないニーズ）が先にあり、その上で必要なアーキテクチャを考え、最後に人を雇って部署を作るのが、あるべき順序です。

<b>そして、最初の出発点である「ビジネスの全体像」を描けるのは、エンジニアでもなく、DXの部門長でもなく、その企業の経営者（代表取締役社長）です。</b>最も難しい仕事であり、それなりにリスキーな決断が必要だからこそ、株主から「代表権」という役割を与えられているはずなのですが・・・

## 業績貢献は10年後。この間ずっと投資できますか？

加えて、経営層の考慮から漏れやすいのが、業績貢献に至るまでの「時間軸」の視点です。

<b>具体的には「エンジニアリングの業績貢献が10年後」であることを許容できるかどうかです。この合意が経営層の内部で形成されていないと、競争優位の道筋は描けません。</b>

なぜかと言えば、絶え間ない「カイゼン」によって、顧客に価値を提供するソフトウェアは、とてつもなく、息が長い事業だからです。ネットが普及した現代において、サービス提供は従量課金の形態を取ることが多く、必然的に損益分岐点が先延ばしされます。

特に業務システム系のサービスの場合、1年や3年で成果が出る甘い世界ではなく、5年〜10年と開発への投資を続けて、ようやくユーザーに寄り添った価値提供が可能になり、ROIがプラスになる世界です。

<b>つまり、本質的には「勝負する投資の時間軸の長さ」が、ビジネスの明暗を分けます。</b>
（例外として、ゲーム業界だけは「当たった・外れた」の世界なので、異なるエコノミクスで動いています）

そして、ソフトウェアをアップデートする難易度は「ユーザー数の多さ」と「機能の多さ」を伴うと、最高潮に達します。

まず「ユーザー数の多さ」に関して言えば、この場合、エンジニアは大量のアクセスがあっても遅延なく処理することを最優先に考えて、システムを改修しなければなりません。いわゆる、負荷分散の技術が求められます。

例えば、テーブルの設計に変更を伴う改修は、ユーザー数が多ければ多いほど「HARD THINGS」になる典型です。その難しさは、永続化されたレコード数、SQLのクエリ発行数、取得データを配列に格納した時のメモリ上限値、呼び出し元のコードの依存関係、アクセス集中時のレコードロックによるタイムアウトといった様々な要素に左右されるため、一概にどれほど「困難」なのかを明示することはできません。この不確実性を最小化するために、コードを読み解き、監視体制を整え、時にはリスクをとる覚悟さえ必要になります。

次に「機能の多さ」に関して言えば、エンジニアはこの複雑性を受け入れる以外に道はありません。アーキテクチャを綺麗に保ったとしても、コードの増加は不可避だからです。共通処理を切り出しても、今度は依存の問題が出てきます。エンジニアにできることは、複雑性を的確な責務に分離し、わかりやすくコーディングすることです。場合によってはDDD（ドメイン駆動設計）といった手法も選択肢になります。

したがって、運用中のソフトウェアに対して、1つの機能を新規追加するコストは、システムの複雑さに比例して増大します。アーキテクチャが制御できるのは、比例するコストの角度を最小限化することだけです。

これらを勘案すると、順調にプロダクトが育っていった場合、開発コストは「初リリースからの経過時間」に沿って増大するため、損益分岐点が後ろ倒しになっていきます。

この辺りの肌感覚は、大規模なサービスにおけるコードを読み、実際にリリースで苦労した経験がないと、なかなか掴むことは難しいものです。

わかりやすく例えるならば、渋谷駅の改修工事です。毎日、大規模な乗降客がいる中で、列車を止めずに、徐々に建築していく再開発は、大規模なソフトウェアの開発そのものと言えます。そして、渋谷駅の改修工事が数十年続くように、ソフトウェアにも長期にわたる投資が必要なのです。

しかし、現実問題として、コードが読めない経営層にとって、ソフトウェアは「見えない存在」であるため、この大変さに対する実感が沸きづらいものです。

仮に、経営層が「10年も待てない！」と言って、すぐに成果の出るソフトウェアの開発に邁進した場合、どうなるのでしょうか？

おそらく、その結果は厳しいものになるでしょう。仮に「すぐに実装できる」「すぐに効果が出る」ソフトウェアを生み出せたとしても、その条件は競合他社にとっても同じであり、多くの場合、競争優位性には結びつかないからです。

「利益が出ること」と「利益が持続すること」は別次元の問題です。ソフトウェアに対して「長期にわたる競争優位性」を期待するのであれば、経営層が「10年」という長期にわたる開発投資を見据えた上で、知恵を絞らなくてはなりません。そこから逆算して、事業戦略の策定や、資金調達の作戦を練る必要があります。

ですが、コードが読めない経営層はこの辺りの事情を考慮できませんし、長期視点を持ち合わせていることも稀です。そして、成果を焦った経営層が、次のような言葉を1度でも口にすると、悲劇が起こります。

<ul>
<li>「納期は厳守でお願いします」</li>
<li>「エンジニアを5人追加したから、絶対、期日に間に合うよね？」</li>
<li>「技術的には可能でしょ？何でまだ見積もりが出ないの？」</li>
<li>「リリースの遅延は論外。チームの評価は下げる」</li>
<li>「なんでわざわざテストコードを書くの？仕様書でいいでしょ」 </li>
<li>「リファクタリングなんて無駄」</li>
<li>「３年以内にROIがプラスにならないなら、やる価値がない」</li>
<li>「こんな高額な監視ツール、入れてなんの意味があるの？」</li>
<li>「誰がバグを出したんだ？」</li>
</ul>
  
## エンジニアと投資家は「経営層」を冷徹に見ている

<b>誤解を恐れずに言えば、コードを読み書きするエンジニアにとって、ソフトウェアに疎い経営層ほど「厄介」なものはありません。</b>

日本のエンジニア界隈におけるスラングで「メテオフォール型開発」という用語があり、TwitterなどのSNSで定期的に話題になります。これは、絶対的な意思決定者（誰とは言わない）が、エンジニアが開発する環境をめちゃくちゃに破壊することを揶揄した用語です。

<a href="https://eiki.hatenablog.jp/entry/meteo_fall">エンジニアの間で話題になった「メテオフォール型開発」の元ネタ</a>

<a href="https://twitter.com/search?q=%E3%83%A1%E3%83%86%E3%82%AA%E3%83%95%E3%82%A9%E3%83%BC%E3%83%AB%E5%9E%8B%E9%96%8B%E7%99%BA%20min_faves%3A1000&src=typed_query&f=top">「メテオフォール型開発」のTwitter検索（min_faves:1000）</a>

では、現実問題として、経営層がエンジニアに「宣戦布告」した場合、その企業の開発組織はどうなるのでしょうか？

結論から言えば、その会社から「できるエンジニア」は一斉に消えていきます。それが世間巷における有名大企業であっても、エンジニアに破格の高給を提示していたとしても、エンジニアは容赦なく転職していきます。

なぜかといえば「できるエンジニア」は引く手あまたであり、コードに対して理解のない企業にコミットする理由は、見当たらないからです。また、給与額をアップしたとしても、海外のトップ企業の「本気度」からすれば、微々たるものであり、良い解決策にはなりません。

https://www.nikkei.com/article/DGXZQOGN08F1J0Y2A200C2000000/

そして「できるエンジニア」が消えたソフトウェアからは、アーキテクチャの求心力が失われ、コードは無法地帯と化します。こうなるとソフトウェアのアップデートコストが激増し、さらに生産性が低下していきます。こうしてソフトウェアは「炎上」し、その企業は二度と「できるエンジニア」を採用することはできないでしょう。

つまり、ソフトウェアを中心とする事業において、競争優位性を確立するためには、エンジニアを雇い続ける必要があり、その鍵を握るのが「コードが読める経営層」なのです。実際にコードを書く必要はないですが、エンジニアの気持ちを汲み取れること、すなわち「（いざとなったら）コードが読める」ことが必須となります。

ちなみに、2010年以降に設立された日本のソフトウェア企業においては、良い兆候があります。

それは、経営層、特に創業者が「いざとなったらコードを読める」ことは、珍しいことではないからです。創業者のGitHubのアカウントも、チラホラ目にします。

その理由は、国内のベンチャーキャピタルや、一部の海外の機関投資家が、ここ10年にわたってテクノロジーを重視してきたためです。

そもそも、コードに関する理解が創業者にない場合、投資家は資本を出しづらくなります。テクノロジーを駆使するビジョンを描いているのに、その当事者がコードを読み書きできないのであれば「ニセモノ」かもしれないからです。ソフトウェアは「ものづくり」であり、プロダクトファーストの世界です。

つまり、比較的新しいソフトウェア企業においては、エンジニアという従業員に加えて、大株主である投資家からも、経営層は冷徹に吟味されています。これは、ソフトウェア業界における、新しいガバナンスの効かせ方と言えるでしょう。

古き良き日本の大企業は「エンジニアと株主からのガバナンス」によって、新しいソフトウェア企業が洗練されつつあることに、危機感を持つべきなのかもしれません。（なかなか、難しいでしょうが・・・）

## 「コードが読める世代」と「読めない世代」の利害は一致する

日本において「コードが読めないと、経営判断できない」という時代がやってきたわけですが、コードが読める人、特に10代や20代の方々にとっては、非常に良い時代です。どこに行っても重宝されるでしょう。

また、将来有望なソフトウェア企業には、海外の機関投資家などを通じて「潤沢かつ長期の資金」が供給されている時代です。このため、かつては3Kと言われたコードを読み書きする「エンジニア」という職業のイメージも、今後は大きく変わっていくでしょう。

対照的に、コードが読めないのに「DX」というバズワードを連発する企業にとっては暗黒を通り越して、氷河期の時代です。

コードが読み書きできない「名ばかりエンジニア」や「なんちゃってITコンサルタント」も、今後はそのメッキが剥がれていくでしょうし、ソフトウェアの知見がない40代の大企業管理職にとっても、生き辛い時代になりつつあります。

https://www.nikkei.com/article/DGXZQOUF142RO0U1A111C2000000/

しかし、世の中の資金循環という視点では、これが悲観すべき「断絶」をもたらすわけではありません。

以下、筆者の仮説です。

仮に、今の若い世代がソフトウェア企業において、しっかりとコードを読んだ上で、正しい意思決定を下し、本業で収益を確保し、その結果として機関投資家（年金基金や大学基金など）が保有する株式の価値を、10年のスパンで高めることに成功したと仮定します。

すると、これらの有価証券の利益は、配当・売却益・含み益を通じて「コードの読めない世代」に還元されて、社会全体が豊かになります。たとえば、大学基金が運用に成功すれば、学費を下げたり、奨学金の原資になります。

<b>すなわち、異なる世代において、「投資サイド（応援団）」と「執行サイド（実行部隊）」に分かれて、それぞれの役割をまっとうした場合においては、世代を超えた利害は一致するわけです。</b>

キーファクターは、機関投資家からのソフトウェア産業に対する長期資金の流入ですが、今後、時間をかけて実現していくでしょう。*

https://www.nikkei.com/article/DGXZQOUC26CML0W1A820C2000000/

つまり、コードが読める世代と、コードが読めない世代は、上下の関係ではなく、それぞれ手を取り合うべき補完の関係にあるのです。

時代は大きく変わりました。
  
いつの日か「メテオフォール型開発」が忘却されることを、心から願っています。

今月はここまで。

## 補足事項

### Annotation

[*] 例えば、2021年にCoral Capitalは３号ファンド（運用額約140億円）を組成し、最大の運用期間を14年に設定したと発表した。資金は、国内外の機関投資家や年金基金を中心に集めたという。これは、ソフトウェア企業における戦略策定の視点を長期化できることを意味する。ファンドの運用期間を長期に設定できる（主に海外の）機関投資家の支援が追い風となった（ただし、この手のファンド組成はタイミングが命であり、景気変動の影響を受けやすい点には留意する必要がある）

 - https://coralcap.co/2021/08/announcing-coral-capital-iii/

[*]画像配信最適化の洞察過程は下記の通り
/** （マニアックな考察でスミマセン。推測が違っていたらnoteさん、ごめんなさいm） **/
- 今までサイズ別に圧縮してS3に格納していたのか！
  - 当然、S3の容量圧迫（＝コスト増）するので、これは大変だ
  - ZOZOでも2019年ごろに60TBのアセットでパンパンになりましたしね
  - 細かいサイズの制御ができないので、レンダリング時点の最適化が難しい＝SEOに悪影響
  - 圧縮時の処理も時間かかりそう。同期的処理だと遅延するなぁ。。。
  
- Fastlyを使うのか
  - 比較対象はImageFlux/Akamaiあたりと推定。メルカリは確かImageFlux
  - CloudFront+Lambdaならランニングコストは安いが、実装コストは多分やばい
     - ZOZOはLambdaでリサイズ実装してたはず
  - いずれにしても、画像変換処理って、どこの責務にするか迷いますよね
     - インフラっぽいし(CDN)、クライアントっぽいし(画像表示)、サーバーっぽい(リサイズの実行)
     - 要は全部なんですよね。。。。
     
- キャッシュ時間の設定によってコストの負担セクターが変わるなぁ
  - 短いとサーバーの負担になるし
  - 長いとユーザーからの問い合わせ件数が増加するかも
  - Fastlyはキャッシュクリアが早いので(200ms)、この点良いですね
  
- パラメータの設定も難しいな。どこまでクエリストリングに含めるべきか
  - クオリティ調整→あり（q=）
  - "rectangle_large_type_2"はクエリパラメータではないルールの指定なのか（謎）
  - 画像重心の座標設定→これはないのか。管理画面でグローバル制御かな？
     - 任意範囲の切り抜きではないので、そりゃそうだなと
     - FastlyはImageOptimizerでcutにパラメータつければできそう
  - 異常パラメータ（比率）は許容しているっぽい
     - ぺちゃんこ画像もパラメータの設定次第ではいける（比率自動計算による圧縮はなし）
  - height/widthのパラメータ(px)は上限値あり
     - これを超えるとキャッシュサーバーが404を返す
     - これはFastlyの仕様かなと推察？画像が大きいとキャッシュ鯖に負荷行きますし
  - アップロード画像のバリデーションも値の決めがむずかしそう
     - 容量MBと大きさpx
     - 画像ファイルである判定は、拡張子ではなくバイナリを見ているかなと予想
     
- 動作保証の決めも難しいな
  - jpg/png/gifなので、流石にHEICは見送りですね
  - アニメーションGIF！わいわい！
  - formatでwebpを宣言するだけで良いのは便利
  
- 多分、アプリケーションコードの書き換え祭りがある
  - 静的アセット格納先のhostをEnvで定数化して一元参照
  - ハードコードされた箇所を全て置き換え！（IDEで検索祭り）
  
- 影響範囲広いのでリリースは冷や汗もの。リスクはそれなりにある
  - アップロード時の所要時間監視が必須
  - 多分、Fastly側で外形監視をやっているのだろうな
  - エラー時にはSlackに通知されるようにしているのかな？
  - Sentryはある。NewRelicはAPI叩いてないので今はなさそう？by devtool XHR
  
- 移行に至るまでの期間は1年以上とのこと
  - https://note.jp/n/n017e4d73e0e2 に期間が書いてありました
  - やはり、かかりますよね。影響範囲広い＋クリティカルなので
  - 影響範囲の調査だけで、たいぶ工数が持っていかれそうな所感
  - この手の改修は、実装誰がやる問題もある（インフラ・クライアント・サーバー全部！）

### Certification
筆者がエンジニアであることの痕跡を残しておきます。
https://github.com/yutakasugiura/public_comment

<img src="/img/20220220_note_img_1.png">

本職はバックエンドですが、趣味はNuxt.jsで爆速ページをつくることです。SSG最高！
https://the-shashi.com

<img src="/img/20220220_note_img_2.png">


```
/** tag **/
#コラム
#ビジネス
#経営
#エンジニア
#DX
#テクノロジー
#日経COMEMO
```
